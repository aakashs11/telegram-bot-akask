#!/bin/bash
# Template: Populate GCP Secrets
# 
# INSTRUCTIONS:
# 1. Copy this file to populate_secrets.sh (which is gitignored)
# 2. Replace all PLACEHOLDER values with your actual credentials
# 3. Run the script to populate GCP Secret Manager
# 4. NEVER commit the actual populate_secrets.sh file!

set -e  # Exit on error

echo "Creating secrets in GCP Secret Manager..."

# Create secrets (if they don't exist)
gcloud secrets create telegram-bot-token --replication-policy="automatic" 2>/dev/null || echo "telegram-bot-token already exists"
gcloud secrets create openai-api-key --replication-policy="automatic" 2>/dev/null || echo "openai-api-key already exists"
gcloud secrets create youtube-api-key --replication-policy="automatic" 2>/dev/null || echo "youtube-api-key already exists"
gcloud secrets create google-sheet-id --replication-policy="automatic" 2>/dev/null || echo "google-sheet-id already exists"
gcloud secrets create drive-folder-id --replication-policy="automatic" 2>/dev/null || echo "drive-folder-id already exists"
gcloud secrets create cloud-run-url --replication-policy="automatic" 2>/dev/null || echo "cloud-run-url already exists"

echo ""
echo "Adding secret values..."

# Replace PLACEHOLDER values with your actual credentials
echo -n "TELEGRAM_BOT_TOKEN_HERE" | gcloud secrets versions add telegram-bot-token --data-file=-
echo "✅ telegram-bot-token added"

echo -n "OPENAI_API_KEY_HERE" | gcloud secrets versions add openai-api-key --data-file=-
echo "✅ openai-api-key added"

echo -n "YOUTUBE_API_KEY_HERE" | gcloud secrets versions add youtube-api-key --data-file=-
echo "✅ youtube-api-key added"

echo -n "GOOGLE_SHEET_ID_HERE" | gcloud secrets versions add google-sheet-id --data-file=-
echo "✅ google-sheet-id added"

echo -n "DRIVE_FOLDER_ID_HERE" | gcloud secrets versions add drive-folder-id --data-file=-
echo "✅ drive-folder-id added"

echo -n "placeholder" | gcloud secrets versions add cloud-run-url --data-file=-
echo "✅ cloud-run-url added (placeholder)"

echo ""
echo "✅ All secrets populated successfully!"
